//>>built
require({cache:{"url:epi-cms/project/templates/ProjectModeToolbar.html":"<div class=\"epi-project-mode-toolbar\">\r\n\t<span data-dojo-attach-point=\"projectIconNode\" class=\"dijitReset dijitInline epi-project-mode-toolbar__icon-node\">\r\n\t\t<span class=\"dijitReset dijitInline dijitIcon epi-iconProject\"></span>\r\n    </span>\r\n    <span data-dojo-attach-point=\"projectLabelNode\" class=\"dijitInline\">${localizations.label}</span>\r\n    <span data-dojo-attach-point=\"projectSelectorNode\"></span>\r\n    <span class=\"dijitInline epi-project-mode-toolbar__warning-label\">${localizations.projectdoesnotexists.currentprojectdoesnotexists}</span>\r\n    <span data-dojo-attach-point=\"contextMenu\" class=\"epi-project-mode-toolbar__contextmenu\"></span>\r\n    <span data-dojo-attach-point=\"projectOverviewButtonNode\"></span>\r\n</div>\r\n","url:epi-cms/project/templates/CurrentProjectDoesNotExistsWarning.html":"<div class=\"epi-project-mode-project-deleted-warning\">${warning}</div>\r\n<p>${description}</p>"}});define("epi-cms/project/ProjectModeToolbar",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/on","dojo/dom-style","dojo/dom-class","dojo/string","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/_LayoutWidget","dijit/form/Button","epi/shell/DialogService","epi/shell/widget/_ModelBindingMixin","./ProjectSelector","./viewmodels/ProjectModeToolbarViewModel","epi/dependency","epi/shell/command/builder/DropDownButtonBuilder","epi/shell/command/builder/MenuAssembler","dojo/text!./templates/ProjectModeToolbar.html","dojo/text!./templates/CurrentProjectDoesNotExistsWarning.html","epi/i18n!epi/cms/nls/episerver.cms.components.project.toolbar"],function(_1,_2,_3,on,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14){return _1([_9,_7,_8,_c],{templateString:_12,localizations:_14,_projectDoesNotExistWarning:"",postscript:function(){this.inherited(arguments);this.projectService=this.projectService||_f.resolve("epi.cms.ProjectService");},postMixInProperties:function(){this.inherited(arguments);if(!this.model){this.own(this.model=new _e());}this._projectDoesNotExistWarning=_6.substitute(_13,{warning:_14.projectdoesnotexists.alert.warning,description:_14.projectdoesnotexists.alert.description});},buildRendering:function(){this.inherited(arguments);this._setupContextMenu();var _15=this._projectDoesNotExistWarning;this.own(this.projectOverviewButton=new _a({showLabel:true,"class":"dijitHidden epi-chromeless",label:_14.overview.label},this.projectOverviewButtonNode),this.projectOverviewButton.on("click",_2.hitch(this,"_openProjectOverview")),this.projectSelector=new _d({iconClass:"dijitNoIcon","class":"epi-chromeless epi-chromeless--inverted epi-chromeless--with-arrow epi-project-mode-toolbar__selector",enableDefaultValue:true,defaultValueText:_14.defaultoption,store:this.model.projectStore},this.projectSelectorNode),this.model.on("currentProjectDoesNotExists",function(){_b.alert(_15);}));},_toggleOverviewButton:function(_16){var _17=this.projectOverviewButton.domNode;_5.toggle(_17,"dijitHidden",!_16);},startup:function(){this.inherited(arguments);this.own(this.model.watch("overviewButtonVisible",_2.hitch(this,function(_18,_19,_1a){this._toggleOverviewButton(_1a);})));var _1b=this.model;this.model.initialize().then(_2.hitch(this,function(){var _1c=this.domNode;this.own(this.projectSelector.watch("value",_2.hitch(this,function(_1d,_1e,_1f){_5.toggle(_1c,"epi-project-mode-toolbar--project-selected",!!_1f);_5.remove(_1c,"epi-project-mode-toolbar--project-deleted");_1b.set("currentProject",_1f);})));this.projectSelector.set("value",_1b.get("currentProject"));}));this.own(this.projectService.on("currentProjectChanged",_2.hitch(this,function(_20){this.projectSelector.set("value",_20);})));this.own(this.model.on("animateToolbar",_2.hitch(this,function(){_5.add(this.domNode,"epi-project-mode-toolbar--flash");var _21=on(this.domNode,"animationend",_2.hitch(this,function(){_5.remove(this.domNode,"epi-project-mode-toolbar--flash");_21.remove();}));})));this.own(this.model.watch("currentProject",_2.hitch(this,function(_22,_23,_24){if(_24&&_24.isDeleted){_5.add(this.domNode,"epi-project-mode-toolbar--project-deleted");}})));},_openProjectOverview:function(){var _25=this.projectSelector.get("value");if(_25){this.model.showProjectOverview(_25.id);}},_setupContextMenu:function(){this.own(new _11({configuration:[{builder:new _10({settings:{"class":"epi-chromeless",iconClass:"epi-iconContextMenu",showLabel:false,label:_14.contextmenu.label},optionClass:""}),category:"context",target:this.contextMenu}],commandSource:this.model}));}});});