//>>built
define("epi-cms/contentediting/editors/propertyvaluelist/viewmodels/PropertyValueListViewModel",["dojo/_base/declare","dojo/Evented","dojo/Stateful","dojo/store/Observable","dijit/Destroyable","epi/shell/command/_CommandProviderMixin","epi/shell/store/SortableMemory","../command/MoveUpPropertyValue","../command/MoveDownPropertyValue","../command/DeletePropertyValue"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_3,_2,_6,_5],{commands:null,store:null,value:null,readOnly:false,maxLength:null,postscript:function(){this.inherited(arguments);this.store=new _4(_7());this.own(this.store.query().observe(function(){this._changeAttrValue("value",this.get("value"));}.bind(this)));this._createCommands();},addItem:function(_b){if(this.readOnly){return;}var _c=this.store.add({item:_b});this.emit("itemAdded",{itemId:_c});},remove:function(){if(this.readOnly||!this.selectedValue){return;}this.store.remove(this.selectedValue.id);},getPreviousElement:function(_d){return this.store.getSibling(_d,true);},getNextElement:function(_e){return this.store.getSibling(_e,false);},moveUp:function(){this._move(true);},moveDown:function(){this._move(false);},getFilteredValue:function(){return this.get("value").filter(function(_f){return _f===0||!!_f;});},put:function(id,_10){var _11=this.store.get(id);if(_11&&_11.item===_10){return;}_11.item=_10;},_move:function(up){if(this.readOnly||!this.selectedValue){return;}var _12=this.store.getSibling(this.selectedValue.data,up);if(!_12){return;}if(!up){_12=this.store.getSibling(_12);}this.store.put(this.selectedValue.data,{before:_12});},_hasValueGetter:function(){return this.getFilteredValue().length>0;},_valueSetter:function(_13){this.store.query().forEach(function(_14){this.store.remove(_14.id);}.bind(this));if(_13){_13.forEach(function(_15){this.store.put({item:_15});},this);}},_valueGetter:function(){return this.store.data.map(function(_16){return _16.item;});},_createCommands:function(){this.add("commands",new _8({model:this}));this.add("commands",new _9({model:this}));this.add("commands",new _a({model:this}));}});});