//>>built
require({cache:{"url:epi-cms/contentediting/editors/templates/CheckboxList.html":"<div class=\"epi-selector-list epi-menu--inverted\">\r\n    <div class=\"epi-menuInverted epi-invertedTooltip\">\r\n        <div class=\"epi-tooltipDialogTop\">\r\n            <span data-dojo-attach-point=\"headerNode\"></span><div class=\"dijitTooltipConnector\"></div>\r\n        </div>\r\n        <button class=\"epi-selector-list-btn epi-chromeless\" data-dojo-attach-point=\"selectAll\" data-dojo-type=\"dijit/form/ToggleButton\" data-dojo-props=\"iconClass:'dijitcheckboxicon'\"></button>\r\n        <div data-dojo-attach-point=\"separatorNode\" class=\"epi-selector-list__separator dijitHidden\"></div>\r\n        <div data-dojo-attach-point=\"listNode\"></div>\r\n    </div>\r\n</div>\r\n"}});define("epi-cms/contentediting/editors/CheckboxList",["dojo/_base/declare","dojo/_base/lang","dojo/keys","dojo/when","dojo/dom-class","dojox/html/entities","epi/epi","dojo/text!./templates/CheckboxList.html","epi/i18n!epi/shell/ui/nls/episerver.shared.action","dgrid/OnDemandList","dgrid/extensions/DijitRegistry","dgrid/Keyboard","dgrid/Selection","dgrid/util/mouse","put-selector/put","epi/shell/dgrid/Focusable","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_KeyNavContainer"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14){return _1([_11,_12,_13,_14],{templateString:_8,store:null,query:null,enableSelectAll:true,selectAllText:_9.selectall,header:_9.select,_setHeaderAttr:{node:"headerNode",type:"innerText"},buildRendering:function(){this.inherited(arguments);this.list=new (_1([_a,_b,_d,_c,_10]))({className:"epi-grid--no-alternating-rows epi-grid-max-height--300",cleanEmptyObservers:false,deselectOnRefresh:false,selectionEvents:"click",selectionMode:"toggle",query:this.get("query"),renderRow:this.renderRow},this.listNode);this.list.on("change",function(e){e.stopPropagation();});this.own(this.list,this.list.on("dgrid-select,dgrid-deselect",_2.hitch(this,"_itemsSelected")),this.list.on("dgrid-refresh-complete",_2.hitch(this,"_refreshComplete")),this.list.addKeyHandler(_3.UP_ARROW,_2.hitch(this,"_listNavigateUp")),this.list.addKeyHandler(_3.PAGE_UP,_2.hitch(this,"_listNavigateUp")),this.list.on(_e.enterRow,_2.hitch(this,"_listMouseover")),this.selectAll.on("click",_2.hitch(this,"_selectAllSelected")),this.selectAll.on("keypress",_2.hitch(this,"_selectAllKeypress")),this.selectAll.on("mouseover",_2.hitch(this,"_selectAllMouseover")));if(this.enableSelectAll){this.list.keyMap[_3.HOME]=_2.hitch(this,"_listNavigateHome");}else{_5.add(this.selectAll.domNode,"dijitHidden");}this.selectAll.set({iconClass:"dijitCheckBoxIcon",label:_6.encode(this.selectAllText),title:this.selectAllText});},startup:function(){if(this._started){return;}this.inherited(arguments);this.list.startup();this.list.set("store",this.store);},focus:function(){if(this.enableSelectAll){this.selectAll.focus();}else{this.list.focus();}},resize:function(){this.inherited(arguments);this.list.resize();},renderRow:function(_15,_16){var _17=_f("div.epi-selector-list__type-wrapper",_f("span.dijit.dijitReset.dijitInline.dijitCheckBox"));var _18=_f("label.epi-selector-list__title.dojoxEllipsis","span",{title:_15.label,textContent:_15.label});return _f("div",[_17,_18]);},refresh:function(){if(!this._started){return;}return this.list.refresh();},_itemsSelected:function(e){var _19=[];Object.keys(e.grid.selection).forEach(function(key){_19.push(key);});if(!_7.areEqual(_19,this.get("selectedItems"))){this.set("selectedItems",_19,true);this.emit("change",{value:_19});}this._updateView();},_refreshComplete:function(evt){_4(evt.results.total,_2.hitch(this,function(_1a){this.emit("loaded");_5.toggle(this.separatorNode,"dijitHidden",!_1a||!this.enableSelectAll);}));},_selectAllSelected:function(){this.set("selectedItems",null);},_selectAllKeypress:function(e){var _1b;switch(e.keyCode){case _3.DOWN_ARROW:_1b=_c.moveFocusHome;break;case _3.PAGE_DOWN:_1b=_c.moveFocusPageDown;break;case _3.END:_1b=_c.moveFocusEnd;break;default:return;}_1b.apply(this.list,[e]);},_selectAllMouseover:function(){this.selectAll.focus();},_listNavigateUp:function(e){var _1c=this.list,row=_1c.row(e),_1d=_1c.up(row,1,true);if(row.id===_1d.id){this.selectAll.focus();}},_listNavigateHome:function(){this.selectAll.focus();},_listMouseover:function(e){var row=this.list.row(e);this.list.focus(row);},_setSelectedItemsAttr:function(_1e,_1f){this._set("selectedItems",_1e);if(!_1f){this.list.clearSelection();if(_1e){_1e.forEach(function(_20){this.list.select(_20);}.bind(this));}}this._updateView();},_updateView:function(){this.selectAll.set("checked",!this.selectedItems||this.selectedItems.length===0);}});});