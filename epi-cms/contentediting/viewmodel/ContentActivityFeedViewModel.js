//>>built
define("epi-cms/contentediting/viewmodel/ContentActivityFeedViewModel",["dojo/_base/declare","dojo/_base/lang","dojo/when","epi/dependency","epi-cms/project/viewmodels/_ProjectFeedViewModel"],function(_1,_2,_3,_4,_5){return _1([_5],{isSingleItemSelected:true,_contentLink:null,isActivitiesVisible:false,_activityFeedSettings:null,postscript:function(){this.inherited(arguments);this.store=this.store||_4.resolve("epi.storeregistry").get("epi.cms.activities");this.profile=this.profile||_4.resolve("epi.shell.profile");this._activityFeedSettings={};_3(this.profile.get(this._getActivityFeedProfileKey())).then(function(_6){this._activityFeedSettings=_6;this.set("isActivitiesVisible",!!(_6&&_6.isActivitiesVisible));}.bind(this));},_contentLinkSetter:function(_7){this._contentLink=_7;this._updateQuery();},_isActivitiesVisibleSetter:function(_8){this.isActivitiesVisible=_8;this._updateQuery();this._persistActivityFeedSettings({isActivitiesVisible:_8});},_updateQuery:function(){if(this.isActivitiesVisible&&this._contentLink){this.set("query",{contentReferences:[this._contentLink]});}else{this.set("query",null);}},_nameSetter:function(_9){this.set("placeholderName",_9);},_persistActivityFeedSettings:function(_a){this._activityFeedSettings=_2.mixin(this._activityFeedSettings,_a);this.profile.set(this._getActivityFeedProfileKey(),this._activityFeedSettings);},getActivityFeedSettings:function(){return this._activityFeedSettings;},_getActivityFeedProfileKey:function(){return this.componentTypeName+"activity-feed";}});});