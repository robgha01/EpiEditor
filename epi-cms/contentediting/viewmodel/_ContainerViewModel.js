//>>built
define("epi-cms/contentediting/viewmodel/_ContainerViewModel",["dojo/_base/array","dojo/_base/declare","epi/shell/DestroyableByKey","./_ViewModelMixin"],function(_1,_2,_3,_4){return _2([_4,_3],{constructor:function(){this._data=[];},destroy:function(){this.inherited(arguments);this._data.forEach(function(_5){if(_5.destroy){_5.destroy();}});},addChild:function(_6,_7){_6.set("parent",this);_6.set("readOnly",this.readOnly);_6.id=this._hash(_6);if(typeof _7=="number"){this._data.splice(_7,0,_6);}else{this._data.push(_6);}this._emitChildrenChanged();},getChild:function(_8){var _9=this._data;for(var i=_9.length-1;i>=0;i--){if(_9[i].equals(_8)){return _9[i];}}return null;},getChildById:function(id){var _a=this._data;for(var i=_a.length-1;i>=0;i--){if(_a[i].id===id){return _a[i];}}return null;},getChildByIndex:function(_b){return this._data[_b];},getChildren:function(){return this._data;},removeChild:function(_c,_d){var _e=this.indexOf(_c);if(_e<0){if(_d){this.getChildren().slice().forEach(function(_f){if(typeof _f.removeChild==="function"){_f.removeChild(_c,_d);}});}return;}_c=this.getChildByIndex(_e);this.destroyByKey(_c.id);_c.destroy();this._data.splice(_e,1);this._emitChildrenChanged();},move:function(_10,_11){var _12=this.indexOf(_10);this._data.splice(_12,1);this._data.splice(_11,0,_10);this._emitChildrenChanged();},indexOf:function(_13){var _14=this._data.indexOf(_13);if(_14>=0||!_13||typeof _13.id==="undefined"){return _14;}for(var i=0;i<this._data.length;i++){if(this._data[i].id===_13.id){return i;}}return -1;},_hash:function(_15){},_readOnlySetter:function(_16){this.readOnly=_16;_1.forEach(this.getChildren(),function(_17){_17.set("readOnly",_16);},this);},_emitChildrenChanged:function(_18){var _19=this._data.length;_1.forEach(this._data,function(_1a,_1b){_1a.set("canMoveNext",_1b<(_19-1));_1a.set("canMovePrevious",_1b>0&&_1b<=(_19-1));_1a.set("hasSiblings",_19>1);});this.set("count",_19||0);this.emit("childrenChanged",_18?_18:this);}});});