//>>built
define("epi-cms/contentediting/command/Publish",["dojo/_base/declare","dojo/topic","dojo/when","epi/shell/TypeDescriptorManager","epi-cms/core/ContentReference","epi-cms/contentediting/ContentActionSupport","epi-cms/contentediting/command/_ChangeContentStatus","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1([_7],{label:_8.publish.label,executingLabel:_8.publish.executinglabel,tooltip:_8.publish.title,iconClass:"epi-iconPublished",action:_6.saveAction.Publish,forceReload:true,_execute:function(){return _3(this.inherited(arguments)).then(function(_9){var _a=new _5(_9.oldId).createVersionUnspecificReference().toString();_2.publish("/epi/cms/contentdata/childrenchanged",_a);});},_onModelChange:function(){this.inherited(arguments);var _b=this.model.contentData,_c=null;switch(_b.status){case _6.versionStatus.PreviouslyPublished:_c=_8.republish;break;case _6.versionStatus.CheckedOut:if(_b.isMasterVersion){_c=_8.publish;}else{_c=_8.publishchanges;}break;default:_c=_8.publishchanges;}var _d=_4.getValue(_b.typeIdentifier,"publishView");this.set("label",_c.label);this.set("title",_c.title);this.set("executingLabel",_c.executinglabel);this.set("viewName",_d);}});});