//>>built
define("epi-cms/contentediting/LanguageNotification",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/Stateful","dojo/dom-construct","epi/dependency","epi-cms/ApplicationSettings","epi-cms/contentediting/command/Editing","epi/i18n!epi/cms/nls/episerver.cms.contentediting.languagenotification"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_5],{order:50,_valueSetter:function(_b){var _c=_b.context;if(!_c.languageContext){this.set("notification",null);return;}var _d=_7.resolve("epi.storeregistry").get("epi.cms.language");_d.query().then(_2.hitch(this,function(_e){var _f={};_3.forEach(_e,function(_10){_f[_10.languageId]=_10.name;},this);var _11=_c.languageContext.warning;var _12=_8.currentContentLanguage;var _13=_c.languageContext;var _14;if(_12!==_13.preferredLanguage&&_13.isTranslationNeeded){_11=_2.replace(_a.nottranslatedswitchto,[_f[_13.language],_f[_13.preferredLanguage]]);_14=_13.preferredLanguage;}else{if(_12!==_13.language&&!_13.isTranslationNeeded){var _15=_f[_12];var _16=_f[_13.language];if(_15&&_16){_11=_2.replace(_a.workinginwrongsite,[_15,_16]);}else{_11=_a.languagenotenabled;}_14=_13.language;}}if(!_11){this.set("notification",null);return;}var _17=_6.create("div",{innerHTML:_11});var _18=_f[_14];if(_18){var url=new _4(window.top.location.href);var _19=_2.replace(_a.switchto,[_18]);_6.create("a",{href:[url.scheme,"://",url.authority,url.path,"?language=",_14,"#context=",_c.versionAgnosticUri].join(""),innerHTML:_19,title:_19},_17);}this.set("notification",{content:_17,commands:_13.isTranslationNeeded&&_12===_13.preferredLanguage?[_9.translate]:[]});}));}});});