//>>built
define("epi-cms/contentediting/EditNotifications",["dojo/_base/declare","dojo/_base/lang","dojo/Evented","epi/shell/DestroyableByKey","epi-cms/plugin-area/edit-notifications"],function(_1,_2,_3,_4,_5){return _1([_4,_3],{_notificationChangedKey:"_EditingNotificationHandles",_notificationsKey:"_notifications",_notifications:null,postscript:function(){this.inherited(arguments);this.own(_5.on("added, removed",this._watchNotifications.bind(this)));this._watchNotifications();},update:function(_6,_7,_8){this._notifications.forEach(function(_9){_9.set("value",{contentData:_6,context:_7,contentViewModel:_8});});},updateSettings:function(_a){this._notifications.forEach(function(_b){_b.set("settings",_a);});},suspend:function(){this._notifications.forEach(function(_c){_c.set("isSuspended",true);});},wakeUp:function(){this._notifications.forEach(function(_d){_d.set("isSuspended",false);});},_watchNotifications:function(){this.destroyByKey(this._notificationsKey);this._notifications=_5.get().sort(function(a,b){return a.order-b.order;}).map(function(_e){this.ownByKey(this._notificationsKey,_e);return _e;},this);this.destroyByKey(this._notificationChangedKey);this._notifications.forEach(function(_f){this.ownByKey(this._notificationChangedKey,_f.watch("notification",function(_10,_11,_12){this.emit("changed",{notification:_f,oldValue:_11,newValue:_12});}.bind(this)));},this);},getAvailableNotificationIndex:function(_13){if(typeof _13.order==="undefined"){return undefined;}var _14=this._notifications.filter(function(n){return n!==_13&&n.notification&&n.notification.content;});var _15=0;_14.forEach(function(n,_16){if(_13.order>=n.order){_15=_16+1;}},this);return _15;}});});