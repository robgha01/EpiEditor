//>>built
define("epi-cms/store/CustomQueryEngine",["dojo/_base/array","epi/obsolete"],function(_1,_2){return function(_3,_4){_2("epi-cms/store/CustomQueryEngine","Use epi-cms/store/configurableQueryEngine instead","12.0");switch(typeof _3){case "object":case "undefined":var _5=_3;_3=function(_6){for(var _7 in _5){if(_4&&_4.ignore){var _8;for(var _9 in _4.ignore){if(_7===_4.ignore[_9]){_8=true;break;}}if(_8){_8=false;continue;}}var _a=_5[_7];if(_4&&_4.comparers&&_4.comparers[_7]){if(!_4.comparers[_7](_a,_6)){return false;}}else{if(_a&&_a.test){if(!_a.test(_6[_7])){return false;}}else{if(_a&&_a!==_6[_7]){return false;}}}}return true;};break;case "string":if(!this[_3]){throw new Error("No filter function "+_3+" was found in store");}_3=this[_3];break;case "function":break;default:throw new Error("Can not query with a "+typeof _3);}function _b(_c){var _d=_1.filter(_c,_3);if(_4&&_4.sort){_d.sort(function(a,b){for(var _e,i=0;(_e=_4.sort[i]);i++){var _f=a[_e.attribute];var _10=b[_e.attribute];if(typeof _f==="string"&&typeof _10==="string"){_f=_f.toLowerCase();_10=_10.toLowerCase();}if(_f!==_10){return _e.descending===(_f>_10)?-1:1;}}return 0;});}if(_4&&(_4.start||_4.count)){var _11=_d.length;_d=_d.slice(_4.start||0,(_4.start||0)+(_4.count||Infinity));_d.total=_11;}return _d;};_b.matches=_3;return _b;};});