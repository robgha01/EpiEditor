//>>built
define("epi-cms/widget/LocalFolderUploader",["dojo/_base/declare","dojo/when","dojo/on","epi-cms/_ContentContextMixin","epi-cms/widget/MultipleFileUpload"],function(_1,_2,on,_3,_4){var _5="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";return _1([_4,_3],{constructor:function(_6){_1.safeMixin(this,_6);},postCreate:function(){this.inherited(arguments);_2(this.getCurrentContent()).then(function(_7){this.set("uploadDirectory",_7.contentLink);this.set("createAsLocalAsset",true);}.bind(this));var _8,_9;var _a=this._fileListModel.watch("uploadFiles",function(_b,_c,_d){var _e=_d[0];_9=_e.name;if(_e.size>this.thumbnailMaxFileSize){_8=_5;}else{var _f=new FileReader();_f.onload=function(_10){_8=_10.target.result;}.bind(this);_f.readAsDataURL(_e);}_a.remove();}.bind(this));this.own(this._fileListModel.watch("progress",function(_11,_12,_13){var _14=parseInt(_13.percent.replace("%",""));if(_14<=this.uploadProgressThreshold&&_8){this.emit("uploadFilePreview",_8,_9);}this.emit("uploadProgress",_14);}.bind(this)));}});});