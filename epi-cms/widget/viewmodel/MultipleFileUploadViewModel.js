//>>built
define("epi-cms/widget/viewmodel/MultipleFileUploadViewModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/when","dojo/Stateful"],function(_1,_2,_3,_4,_5){return _2([_5],{upload:function(_6){return _4(this._filterUploadingFiles(_6),function(_7){if(!_7||!(_7.existingContents instanceof Array)||_7.existingContents.length===0){return {showConfirmation:false,uploadingFiles:_6};}return {showConfirmation:true,uploadingFiles:_6,newFiles:_7.newFiles,existingContents:_7.existingContents};});},_filterUploadingFiles:function(_8){var _9=this;if(!_9.store){return null;}var _a=_3.clone(_9.get("query"));_a.typeIdentifiers=_a.typeIdentifiers||[];var _b="episerver.core.icontentmedia";if(_a.typeIdentifiers.indexOf(_b)<0){_a.typeIdentifiers.push(_b);}return _4(_9.store.query(_a),function(_c){var _d=_1.filter(_c,function(_e){return _e.typeIdentifier!=="episerver.core.icontentfolder"&&_1.some(_8,function(_f){return _f.name.toLowerCase()===_e.name.toLowerCase();});});var _10=_1.filter(_8,function(_11){return _1.every(_c,function(_12){return _11.name.toLowerCase()!==_12.name.toLowerCase();});});return {existingContents:_d,newFiles:_10};});}});});