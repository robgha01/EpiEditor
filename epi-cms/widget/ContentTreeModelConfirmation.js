//>>built
define("epi-cms/widget/ContentTreeModelConfirmation",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","dojo/string","dojo/when","dojo/_base/json","dojox/html/entities","epi/dependency","epi/string","epi/shell/TypeDescriptorManager","epi/shell/DialogService","epi-cms/contentediting/ContentActionSupport","epi-cms/widget/sharedContentDialogHandler","epi/i18n!epi/cms/nls/episerver.cms.components.pagetree","epi/i18n!epi/cms/nls/episerver.cms.components.project"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){return function(_11){var _12=function(_13){return _13&&typeof _13=="function";};var _14=function(_15,_16){_c.alert(_a.toHTML(_15)).then(function(){if(_12(_16)){_16();}});};var _17=function(_18,_19){return _6(_19).then(function(_1a){return _c.confirmation({description:_a.toHTML(_1a),title:_18});});};var _1b=function(_1c,_1d){_6(_1c,function(_1e){if(_1e&&(_1e.message||_1e.statusDescription)){var _1f=_1e.message||_1e.statusDescription;_14(_1f,_1d);}else{if(_12(_1d)){_1d();}}},function(e){_14(_8.encode(_7.fromJson(e.xhr.responseText)));});return _1c;};var _20=function(_21,_22,_23,_24,_25,_26){var _27=_21[0],_28=_21.length>1?"move.multiple.":"move.single.";var _29=_21.every(function(_2a){return _2a.typeIdentifier===_27.typeIdentifier;})?_27.typeIdentifier:"episerver.core.icontentdata";var _2b=_b.getResourceValue(_29,_28+"title");var _2c=null;if(_22.isWastebasket){_2c=_e({contentItems:_21});}else{if(_24!==undefined&&(_22.properties.pageChildOrderRule!==_d.sortOrder.Index)){var _2d,_2e;if(_23){_28=_21.length>1?"copy.multiple.":"copy.single.";_2e=_b.getResourceValue(_29,_28+"title");_2d=_5.substitute(_f.changepeerorderconfirmationcopy,[_11.getLabel(_22)]);}else{_2e=_2b;_2d=_5.substitute(_f.changepeerorderconfirmation,[_11.getLabel(_22)]);}_2c=_17(_2e,_2d);}else{if(!_23){if(_21.some(function(_2f){return !_11.canCut(_2f);})){_14(_b.getResourceValue(_29,"moverequiresdeleteaccess"),function(){return false;});return false;}var _30="{0}<br/><br/>{1}",_31=_2.replace(_b.getResourceValue(_29,_28+"confirmation"),[_21.length]),_32=_2.replace(_30,[_31,_b.getResourceValue(_29,"movedescription")]);var _33=_9.resolve("epi.cms.ProjectService");if(_33.isProjectModeEnabled){_32=_2.replace(_30,[_32,_10.moveconfirmation]);}_2c=_17(_2b,_32);}else{if(!_11.canCopy(_27)){_14(_b.getResourceValue(_29,"copynotsupported"));return false;}}}}return _6(_2c,function(){return _25.apply(_11,_26);},function(){return false;});};_3.around(_11,"pasteItem",function(_34){return function(_35,_36,_37,_38,_39){return _20([_35],_37,_38,_39,_34,arguments);};});_3.around(_11,"pasteItems",function(_3a){return function(_3b,_3c,_3d,_3e){return _20(_3b,_3c,_3d,_3e,_3a,arguments);};});_3.after(_11,"pasteItem",function(_3f){return _3f&&_1b(_3f);});_3.after(_11,"remove",function(_40){return _40&&_1b(_40);});return _11;};});