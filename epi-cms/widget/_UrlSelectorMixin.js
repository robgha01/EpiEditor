//>>built
define("epi-cms/widget/_UrlSelectorMixin",["dojo/_base/declare","dojo/Deferred","dojo/_base/lang","dojo/when","epi","epi/Url","epi-cms/core/ContentReference","epi-cms/core/PermanentLinkHelper"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1(null,{_contentData:null,_setValueAndFireOnChange:function(_9){var _a;if(this._valueChangedPromise){this._valueChangedPromise.cancel("");this._valueChangedPromise=null;}this.set("permanentLink",null);this.set("previewUrl",null);if(!_9){this._updateDisplayNode(null);_a=this.value!==_9;this.value=_9;this._contentData=null;if(_a){this.onChange(_9);}this._started&&this.validate();return;}_4(this._getContentByPermanentLink(_9),_3.hitch(this,function(_b){this._updateDisplayNode(_b);var _c=_b.permanentLink;this._started&&this.validate();_a=!_5.areEqual(this.value,_c);this.value=_c;if(_a){this.onChange(_c);}if(_b){this.set("permanentLink",_b.permanentLink);this.set("previewUrl",_b.previewUrl);}}));},_convertValueToContentReference:function(_d){if(this._contentData){return new _7(this._contentData.contentLink);}return null;},_getContentByPermanentLink:function(_e){if(_5.areEqual(this.value,_e)&&this._contentData){return this._contentData;}this._valueChangedPromise=new _2();_4(_8.getContent(_e,{allLanguages:true}),_3.hitch(this,function(_f){this._contentData=_f;if(this._valueChangedPromise){this._valueChangedPromise.resolve(_f);}}));return this._valueChangedPromise.promise;}});});