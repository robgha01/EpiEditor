//>>built
require({cache:{"url:epi-cms/component/templates/MainNavigation.html":"<div>\r\n    <div data-dojo-type=\"epi-cms/widget/SearchBox\" data-dojo-attach-point=\"search\" class=\"epi-gadgetInnerToolbar\"></div>\r\n    <div data-dojo-attach-point=\"navigation\" style=\"overflow:auto;\">\r\n    </div>\r\n    <div class=\"epi-gadget-bottom-container dijitHidden\" data-dojo-attach-point=\"bottomLinkContainer\">\r\n        <a class=\"epi-visibleLink epi-main-navigation-language-link\">${res.showalllanguages}</a>\r\n    </div>\r\n</div>\r\n"}});define("epi-cms/component/MainNavigationComponent",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-class","dojo/when","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","epi-cms/component/_ShowAllLanguagesMixin","epi/dependency","epi/i18n!epi/cms/nls/episerver.cms.components.sitetree","dojo/text!./templates/MainNavigation.html","epi-cms/widget/SearchBox"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _2([_7,_8,_9,_a],{templateString:_d,res:_c,contentRepositoryDescriptors:null,postCreate:function(){this.inherited(arguments);this.contentRepositoryDescriptors=this.contentRepositoryDescriptors||_b.resolve("epi.cms.contentRepositoryDescriptors");var _e=this.contentRepositoryDescriptors.get(this.repositoryKey);var _f=this.roots?this.roots:_e.roots;this.search.set("area",_e.searchArea);this.search.set("searchRoots",_f);var _10=_e.customNavigationWidget||"epi-cms/component/ContentNavigationTree";require([_10],_3.hitch(this,function(_11){var _12=new _11({typeIdentifiers:_e.mainNavigationTypes?_e.mainNavigationTypes:_e.containedTypes,containedTypes:_e.containedTypes,settings:_e,roots:_f,repositoryKey:this.repositoryKey});_12.placeAt(this.navigation);this.tree=_12;_6(this.tree._isSiteMultilingual()).then(function(_13){if(!_13){return;}this.loadShowAllLanguages().then(function(_14){_12.set("showAllLanguages",_14);this._setShowAllLanguagesLinkVisibility(_14);}.bind(this));}.bind(this));this.tree.resize();this.own(this.tree.watch("showAllLanguages",function(_15){var _16=this.tree.get("showAllLanguages");this.search.set("filterOnCulture",!_16);if(this.showAllLanguages!==_16){this.saveShowAllLanguages(_16);}this.set("showAllLanguages",_16);this._setShowAllLanguagesLinkVisibility(_16);}.bind(this)));}));this.own(this.on(".epi-main-navigation-language-link:click",function(){this.tree.set("showAllLanguages",true);}.bind(this)));},layout:function(){var cb=this._contentBox,ocb=this._oldContentBox;if(!cb){return;}if(!ocb||cb.w!==ocb.w||cb.h!==ocb.h){this._oldContentBox=cb;this._relayout();}},_relayout:function(){var sb=_4.getMarginBox(this.search.domNode);var _17=_5.contains(this.bottomLinkContainer,"dijitHidden")?0:_4.getMarginBox(this.bottomLinkContainer).h;_4.setMarginBox(this.navigation,{w:this._contentBox.w,h:this._contentBox.h-sb.h-_17});},_setShowAllLanguagesLinkVisibility:function(_18){_5.toggle(this.bottomLinkContainer,"dijitHidden",_18);if(!this._contentBox){return;}this._relayout();}});});