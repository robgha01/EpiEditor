//>>built
define("epi-cms/component/SharedBlocksViewModel",["dojo/_base/declare","dojo/_base/lang","dojo/when","../asset/view-model/HierarchicalListViewModel","epi-cms/component/_ShowAllLanguagesMixin","./command/NewBlock","epi-cms/command/ShowAllLanguages"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_4,_5],{_selectedTreeItemsSetter:function(_8){this._commandRegistry.newBlockDefault.command.set("model",_8);this.inherited(arguments);},_setupCommands:function(){this.inherited(arguments);this.showAllLanguagesCommand=new _7({model:this});this._setupShowAllLanguages();var _9={newBlockDefault:{command:new _6({viewModel:this})},allLanguages:{command:this.showAllLanguagesCommand,order:55}};this._commandRegistry=_2.mixin(this._commandRegistry,_9);this.pseudoContextualCommands.push(this._commandRegistry.newBlockDefault.command);},_setupShowAllLanguages:function(){_3(this._isSiteMultilingual()).then(function(_a){if(!_a){return;}this.loadShowAllLanguages().then(function(_b){this.set("showAllLanguages",_b);this.showAllLanguagesCommand.set("active",!_b);}.bind(this));}.bind(this));},_showAllLanguagesSetter:function(_c){var _d=this.showAllLanguages;this.inherited(arguments);if(_d!==_c){this.saveShowAllLanguages(_c);this.showAllLanguagesCommand.set("active",!_c);}}});});