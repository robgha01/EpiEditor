//>>built
define("epi-cms/component/SharedBlocks",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-construct","dojo/dom-geometry","dojo/dom-class","dojo/on","epi-cms/asset/HierarchicalList","epi-cms/component/SharedBlocksViewModel","epi/i18n!epi/cms/nls/episerver.cms.components.createblock","epi/i18n!epi/cms/nls/contenttypes.blockdata","epi/i18n!epi/cms/nls/episerver.cms.components.sitetree"],function(_1,_2,_3,_4,_5,_6,_7,on,_8,_9,_a,_b,_c){return _2([_8],{showCreateContentArea:false,modelClassName:_9,noDataMessages:_a.nodatamessages,hierarchicalListClass:"epi-blockList",createContentIcon:"epi-iconPlus",createContentText:_b.create,postMixInProperties:function(){this.inherited(arguments);this.modelBindingMap.showAllLanguages=["showAllLanguages"];},buildRendering:function(){this.inherited(arguments);var _d=this;this.own(_4.after(this.list.grid,"renderQuery",function(_e){return _e.then(function(_f){var _10=_f.length>0?false:_d.model.getCommand("newBlockDefault").get("canExecute");_d._toggleCreateContentArea(_10);});}));var _11=_5.create("a",{"class":"epi-visibleLink",innerHTML:_c.showalllanguages});this.own(on(_11,"click",function(){this.model.set("showAllLanguages",true);}.bind(this)));this.bottomLinkContainer=_5.toDom("<div class=\"epi-gadget-bottom-container dijitHidden\"></div>");_5.place(_11,this.bottomLinkContainer);_5.place(this.bottomLinkContainer,this.domNode);},layout:function(){var _12=_7.contains(this.bottomLinkContainer,"dijitHidden")?0:_6.getMarginBox(this.bottomLinkContainer).h;var _13=_6.getMarginBox(this.searchBoxNode),_14={h:this._contentBox.h-_13.h-_12,w:this._contentBox.w,l:this._contentBox.l,t:this._contentBox.t};this.container.resize(_14);},_onCreateAreaClick:function(){this.inherited(arguments);this.model._commandRegistry.newBlockDefault.command.execute();},_setShowAllLanguagesAttr:function(_15){this._set("showAllLanguages",_15);_7.toggle(this.bottomLinkContainer,"dijitHidden",_15);if(this._contentBox){this.layout();}}});});