//>>built
define("epi-cms/component/Media",["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on","dojo/topic","epi-cms/component/MediaViewModel","epi-cms/asset/HierarchicalList","epi-cms/widget/FilesUploadDropZone","epi-cms/widget/UploadUtil","epi/i18n!epi/cms/nls/episerver.cms.widget.hierachicallist","epi/i18n!epi/cms/nls/episerver.cms.components.media"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b){return _1([_7],{res:_b,showCreateContentArea:true,showThumbnail:true,modelClassName:_6,noDataMessages:_b.nodatamessages,hierarchicalListClass:"epi-mediaList",createContentText:_b.dropareatitle,postMixInProperties:function(){this.inherited(arguments);this.modelBindingMap.dropZoneSettings=["dropZoneSettings"];},buildRendering:function(){this.inherited(arguments);this._setupDropZone();},postCreate:function(){this.inherited(arguments);this.list.set("noDataMessage",this.res.nocontent);var _c=this.model.getCommand("uploadDefault");this.own(_c.watch("canExecute",function(_d,_e,_f){this._toggleCreateContentArea(_f);}.bind(this)),_c.watch("isAvailable",function(_10,_11,_12){this._toggleCreateContentArea(_12);}.bind(this)));},_setupDropZone:function(){var _13=this.model.getCommand("uploadDefault");if(!_13){return;}this.own(this._dropZone=new _8({outsideDomNode:this.container.domNode}));_3.place(this._dropZone.domNode,this.domNode,"first");this.connect(this._dropZone,"onDrop",this._onDrop);},_onDrop:function(evt,_14){_14=_9.filterFileOnly(_14);if(!_14||_14.length<=0){return;}var _15=this.model.getCommand("uploadDefault");if(!_15){return;}_15.set("fileList",_14);_15.execute();this.searchBox.clearValue();},_setDropZoneSettingsAttr:function(_16){if(this._dropZone){this._dropZone.set("settings",_16);}},_onCreateAreaClick:function(){this.inherited(arguments);this.model.getCommand("uploadDefault").execute();},_setupCreateContentArea:function(){this.inherited(arguments);var _17=this.createContentAreaButton.domNode;_2.remove(_17,"epi-flat");_2.add(_17,"epi-button--full-width");}});});