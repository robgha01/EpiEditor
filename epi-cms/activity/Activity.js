//>>built
require({cache:{"url:epi-cms/activity/templates/Activity.html":"<div class=\"epi-event epi-activity\">\r\n    <div class=\"epi-event__title-wrapper\">\r\n        <span class=\"dijitInline\" data-dojo-attach-point=\"iconNode\"></span>\r\n        <span class=\"epi-event__title\" data-dojo-attach-point=\"titleNode\"></span>\r\n    </div>\r\n    <div class=\"epi-event__status\" data-dojo-attach-point=\"actionNode\">\r\n        <span class=\"dijitInline epi-event__status__icon\">\r\n            <span data-dojo-attach-point=\"actionIconNode\"></span>\r\n        </span><span class=\"epi-event__status__message\" data-dojo-attach-point=\"actionTextNode\"></span>\r\n    </div><div data-dojo-attach-point=\"messageNode\"></div\r\n    ><div class=\"epi-activity__comment\" data-dojo-attach-point=\"activityCommentNode\"></div\r\n    ><div class=\"epi-activity__comments\" data-dojo-attach-point=\"containerNode\"></div>\r\n    <div data-dojo-type=\"epi-cms/activity/ActivityCommentForm\" data-dojo-attach-point=\"commentForm\"></div>\r\n</div>\r\n"}});define("epi-cms/activity/Activity",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","./ActivityComment","./viewmodels/ActivityViewModel","./viewmodels/ActivityCommentViewModel","./viewmodels/MessageActivityViewModel","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","epi/shell/widget/_ModelBindingMixin","dojo/text!./templates/Activity.html","epi/i18n!epi/cms/nls/episerver.cms.activities.activity","epi-cms/activity/ActivityCommentForm"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _1([_8,_9,_a,_b],{templateString:_c,model:null,modelBindingMap:{upsertActivityComment:["upsertActivityComment"]},buildRendering:function(){this.inherited(arguments);var _e=this.activity;var _f=new _5({activity:_e});this.set("model",_f);this.own(this.model);this.commentForm.set("model",_f);this.titleNode.textContent=_f.get("title");_3.add(this.iconNode,_f.get("iconClass"));_3.add(this.actionIconNode,_f.get("actionIconClass"));_3.add(this.actionNode,_f.get("actionClass"));this.actionTextNode.textContent=_f.get("content");if(_e.message){_3.add(this.domNode,"epi-activity__message");this.own(this._messageForm=new _4({model:new _7(_e)},this.messageNode));}var _10=_f.getComment();if(_10){this.activityCommentNode.innerHTML=_10;}else{_3.add(this.activityCommentNode,"dijitHidden");}if(_e.comments){_e.comments.forEach(function(_11){this.set("upsertActivityComment",_11);},this);}},startup:function(){this.inherited(arguments);this._messageForm&&this._messageForm.startup();},_getActivityCommentComponent:function(_12){var _13=-1;var _14=null;var _15=this.getChildren()||[];for(var i=0;i<_15.length;i++){_13=i;var _16=_15[i];if(_16.get("model").id===_12){_14=_16;break;}}return {position:(_14!==null?_13:-1),activityComment:_14};},_setUpsertActivityCommentAttr:function(_17){if(!_17){return;}var _18=this._getActivityCommentComponent(_17.id);var _19=_18.activityComment;var _1a=(_18.position===-1?this.getChildren().length:_18.position);if(_19){var _1b=new Date(_19.get("model").lastUpdated).getTime();var _1c=new Date(_17.lastUpdated).getTime();if(_1b===_1c){return;}this.removeChild(_19);_19.destroyRecursive();}var _1d=new _4({model:new _6(_17)});this.addChild(_1d,_1a);}});});