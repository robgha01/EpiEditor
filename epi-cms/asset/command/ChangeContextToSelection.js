//>>built
define("epi-cms/asset/command/ChangeContextToSelection",["dojo/_base/declare","dojo/topic","epi-cms/contentediting/ContentActionSupport","epi/shell/command/_Command","epi/shell/command/_SelectionCommandMixin","epi/shell/TypeDescriptorManager","epi/i18n!epi/cms/nls/episerver.shared.action"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_4,_5],{contentActionSupport:null,forceContextChange:false,forceReload:false,viewType:null,viewName:null,typeIdentifiers:null,postscript:function(){this.inherited(arguments);this.contentActionSupport=this.contentActionSupport||_3;},_execute:function(){var _8=this._getSingleSelectionData();_2.publish("/epi/shell/context/request",{uri:_8.uri},{sender:null,forceReload:this.forceReload,forceContextChange:this.forceContextChange,viewType:this.viewType,viewName:this.viewName});},_onModelChange:function(){var _9=this._getSingleSelectionData();if(!_9){this.set("canExecute",false);this.set("isAvailable",false);return;}var _a=this.contentActionSupport.hasAccess(_9.accessMask,this.contentActionSupport.accessLevel.Read);var _b=this._isTargetOfCorrectType(_9);this.set("isAvailable",_b);this.set("canExecute",_b&&_a);if(this.contentActionSupport.hasAccess(_9.accessMask,this.contentActionSupport.accessLevel.Edit)){this.set("label",_7.edit);this.set("iconClass","epi-iconPen");}else{this.set("label",_7.view);this.set("iconClass","epi-iconSearch");}},_isTargetOfCorrectType:function(_c){if(!this.typeIdentifiers){return true;}return this.typeIdentifiers.some(function(_d){return _6.isBaseTypeIdentifier(_c.typeIdentifier,_d);},this);}});});